
#include "WS2812B.h"

void Set0() // ???????????? ????, ???????? ~0.4 ???
{
	SetOutBit;
	asm("nop");asm("nop");asm("nop");asm("nop"); // ???????? 0,4 ???
	ClearOutBit;
	//asm("nop");asm("nop");asm("nop");asm("nop"); // ???????? 0,8 ???
}

void Set1() // ????????????? ???????, ???????? ~0.8 ???
{
	SetOutBit;
	asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop"); // ???????? 0,8 ???
	ClearOutBit;
	//asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop");asm("nop"); // ???????? 0,8 ???
}

void WsSendByte(int hex) // ??????? ??? ???????? ?????? ????? ?????? ?? ?????. ?????????? ????? ??? ??????
{
	int mask = 0b10000000;
	
	for (int n = 0; n < 8; n++)
	{
		if ((hex & mask) == mask) Set1();
		else Set0();
		mask = mask >> 1;
	}
}

void WsSendPixel(int R, int G, int B) // ??????? ??? ?????? 1 ??????? ?? ????? ? ??????? GRB. ??? ????????? ??????? ???? ???????? ????? G R B ???????
{
	WsSendByte(G);
	WsSendByte(R);
	WsSendByte(B);
}

void WsClear(int a) // ?????? ??????? ??? ??????? a ?????????? ????????
{
	for (int i = 0; i < a; i++) WsSendPixel(0,0,0);
}